# Сервис классификация зловредного ПО

## Бизнес-контекст

В современном мире мобильные устройства, особенно с операционной системой Android, стали неотъемлемой частью нашей повседневной жизни. Однако с ростом популярности Android появилась и угроза зловредного программного обеспечения. Более миллиарда человек используют смартфоны, и ожидается, что к 2025 году число пользователей мобильных телефонов достигнет 7,49 миллиарда.

С появлением Android увеличилась и активность разработчиков зловредного программного обеспечения. Около 2,5 миллионов новых образцов Android-вредоносных программ обнаруживаются ежегодно. Это создает угрозу для безопасности и конфиденциальности пользователей Android.

Данный сервис на основе ключевых признаков, указывающих на качество ПО, и с помощью ML-моделе классифицирует ПО на зловредное и нет.

## Запуск

Для запуска приложения локально выполните следующие шаги:

1. Установите необходимые зависимости:
   ```
   pip install -r requirements.txt
   ```
2. Запустите arq Worker.
   ```
   arq src.Asyncrq.WorkerSettings 
   ```

4. Запустите FastAPI приложение с помощью Uvicorn:
   ```
   uvicorn src.main:app --reload
   ```

5. Запустите Streamlit для frontend:
   ```
   streamlit run src/main_page.py --client.showErrorDetails=false
   ```

## Ссылки

После запуска приложения вы можете перейти по следующим ссылкам:

- Документация OpenAPI доступна по адресу: [http://localhost:8000/docs](http://localhost:8000/docs)
- Приложение доступно по адресу: [http://localhost:8501](http://localhost:8501)

## Структура репозитория
```
├── src
│   ├── auth -- сервис авторизации
|       ├── base_config.py -- основные настройки fastapi_users
|       ├── manager.py -- fastapi_users UserManager
|       ├── schemas.py -- схемы ответов fastapi_users
|       └── utils.py -- utils fastapi_users
|   ├── prediction -- сервис собственно предсказаний
|       ├── ml_predictors -- папка с pkl ML-моделями
|       ├── predict.py -- функция для worker arq
|       └── router.py -- prediction router для FastAPI App (собственно классификация ПО)
|   ├── history -- сервис истории
|       └── router.py -- history router для FastAPI App (история предсказаний и транзакций, доступные модели, пополнение баланса)
|   ├── pages -- страницы frontend Streamlit
|       ├── history_page.py -- история предсказаний и транзакций
|       ├── prediction_page.py -- собственно классификация ПО
|       ├── register_page.py -- регистрация
|       └── user_page.py -- страница пользователя
|   ├── Asyncrq.py -- настройка arq
|   ├── database.py -- настройка DB
|   ├── models.py -- модели базы данных
|   ├── main.py -- основное FastAPI App
|   ├── main_page.py -- основная страница frontend Streamlit (Login)
│   └── config.py -- загрузка переменных среды
│
├── notebooks
│   └── malware_classification.ipynb -- notebook с EDA и обучением моделей
│
├── service_db.db -- тестовая база данных
└── test_input_data.csv -- тестовый набор данных, который может подать пользователь
```